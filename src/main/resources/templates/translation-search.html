<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recherche de traduction</title>
    <link rel="stylesheet" th:href="@{/css/translation-search.css}"/>
</head>
<body>
<div class="container">
    <h1>Rechercher une traduction</h1>
    <form id="searchForm">
        <div class="form-group">
            <label for="number">Entrez un nombre (1 à 30) :</label>
            <!-- Champ de texte pour saisir le nombre -->
            <input type="text" id="number" name="number" placeholder="Ex. 10" required>
        </div>
        <button type="submit">Rechercher</button>
    </form>
    <!-- Zone de résultat qui affichera le fragment HTML (résultat ou erreur) -->
    <div id="resultContainer" class="banner"></div>
</div>

<script>
    document.getElementById('searchForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Empêche le rechargement de la page

        const numberField = document.getElementById('number');
        const resultContainer = document.getElementById('resultContainer');

        // Réinitialiser le conteneur de résultat
        resultContainer.innerHTML = '';

        const numberValue = numberField.value.trim();
        const parsedNumber = parseInt(numberValue, 10);
        if (isNaN(parsedNumber)) {
            resultContainer.innerHTML = `<p class="error">Veuillez saisir un nombre valide.</p>`;
            return;
        }

        // Appel vers l'endpoint qui renvoie un fragment HTML (résultat ou erreur)
        fetch(`/translations/search/html/${parsedNumber}`, {
            method: 'GET'
        })
            .then(response => response.text())
            .then(html => {
                resultContainer.innerHTML = html;
            })
            .catch(error => {
                resultContainer.innerHTML = `<p class="error">${error.message}</p>`;
            });
    });
</script>
</body>
</html>